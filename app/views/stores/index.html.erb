<% provide(:title, 'File Upload') %>

	<!-- <script type="text/javascript" src="../scripts/jquery.js"></script> -->	
					
	<style>
	
		#signin-page {
			height: 1300px;
		}
	
		#signin-page #signin-page-inner {
		    width: 100%;
		    margin: 0 auto;
		}	

		div .table-signin {
			display: table;
			background-color: #E3DDCF;
			width: 1000px;
			border-radius: 0px;
			
			/*border:2px solid #254520;*/
						
			/*box-shadow: 1px 1px 3px #888888;*/			
			
			padding-top: 40px;
			padding-bottom: 40px;
			padding-left: 10px;
			padding-right: 10px;			
		}

		.table-signin p {
			font-family: msyh; 
			font-size: 16px;
			color: #005187;"
		}
		
		
		
		#import.signin-btn {
		  	width: 70px;
		  	height: 20px;			
		}    	   
    	    	
		.signin-btn {
		  	display: inline-block;
		  	text-decoration: none; 
		  	background: linear-gradient(#000, #000);
		  	text-shadow: 1px 1px 1px #0E86B2; 
		  	border-radius: 4px;
		}
	
		.signin-btn:focus {
		  background: #CCC; 
		  color: #5F7A2A;
		  box-shadow: inset 0 1px 0 rgba(200,200,200,0.2);
		}
		
		.signin-btn:hover { 
		  box-shadow: inset 0 1px 1px rgba(255,255,255,0.2), 
		  inset 0 1.5em 1em rgba(255,255,255,0.3);
		}
		
		.signin-btn:active { 
		  box-shadow: inset 0 1px 1px rgba(255,255,255,0.2), 
		  inset 0 1.5em 1em rgba(0,0,0,0.3); 
		}
		
	</style>

    <style>
    	
    	.main {
    		font-family:Arial, Helvetica, sans-serif;
    		font-size: 20px;
    		color: black;
    		height: 500px;
    	}
    	
    	.links {
    		font-family:Arial, Helvetica, sans-serif;
    		font-size: 13px;
    		color: brown;    		
    	}
    	
    	h1 {
    		font-size: 22px;
    	}
    	h2 {
    		font-size: 18px;
    	}
    	h4 {
    		font-size: 16px;
    		font-weight: 600;
    	}    	
    	h5 {
    		font-size: 12px;
    	}    	    	
    	p {
    		font-size: 12px;
    	}
    	
    	.bar {
    		font-size: 16px;
    		font-weight: 400;
    	}
    	
		.input-upload {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 16px;
			width: 600px;
			height: 24px;
			border-style:solid;
			background-color: #fff;
			border-color: #000;
			border-width: 1px;
			padding-left: 6px;
			color: #888;
		}
    	
    	.submit-upload {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 16px;
    		height: 24px;
    	}
    	
    	#admin-events {
    		width: 4000px; 
    	}
    	table#admin-events th {
    		padding-left: 0px;
    	}    	    	
    	table#admin-events tr {
    		height: 20px;
    	}    	
    	table#admin-events td {
    		vertical-align: bottom;    		
    		padding-top: 0px;
    		padding-bottom: 4px;       		    		    		
    	}
		/*table#admin-events tr:nth-child(even) {
			background: #CCC			
		}
		table#admin-events tr:nth-child(odd) {
			background: #FFF
		}    	*/
		
		    	
    	.gray {
			background: #CCC			    		
    	}
    	.white {
			background: #fff    		
    	}
    	.hover-col {
    		background-color: rgba(0, 0, 0, 0.1);
    	}
    	
		.hover-row {
			background-color: #FAC0C1;
		}
		/*.hover-col {
			background-color: #FCD7D7 !important;
		}*/
		.row-select {
			color: #fff;			
			background-color: brown;
		}
		.btn-color-select {
			color: #fff;	
		}
		.btn-color {
		  	color: #A31C1C;			
		}
		    	
		.delete-btn {
		  	display: inline-block;
		  	text-decoration: none; 
		  	width: 50px;
		  	height: 20px;
		  	background: inherit;
		  	border-width: 0px;
		}
		.delete-btn:focus {
		}
		.delete-btn:hover { 
		  	text-decoration: underline; 
		}
		.delete-btn:active { 
		  	text-decoration: underline; 
		}

		.header-shift {
			padding-left: 0px;
		}    	    	

		.reset-db-btn {
		  	width: 200px;
		  	height: 20px;
		}
    	    	
    	    	
    	    	
		#loading {
			background:url("/assets/icon_loading.gif") no-repeat center center;
			height: 100px; width: 100px;
			position: fixed; left: 47%; top: 50%; z-index: 1000;
			margin: -25px 0 0 -25px;
			visibility: hidden;
		}				
    	    	
    	    	
    </style>

	<style>
		
		.scrollbox-both {
	 		height:520px;
	 		width:1200px;
	 		overflow:scroll;
	 		border:1px solid #651375;		
		}
				
	</style>




	<div id="signin-page">
		
		<header>
	
	    	<div id="pos" style="display: none;"></div>

			<%= render 'share/backtotop' %>

			<div style="height: 100px;"></div>
			
		</header>
		
		<div id="signin-page-inner">
			
      
      		<div id="loading"> </div>

      
   <!-- <div id="pos"></div> -->			

			<!-- 
			<form accept-charset="UTF-8" action="/stores/import" enctype="multipart/form-data" method="post">
				<div style="margin:0;padding:0;display:inline">
					<input name="utf8" type="hidden" value="&#x2713;" />
					<input name="authenticity_token" type="hidden" value="i4S3zKfk0QnFTvXLd+ww+JHaWoi9Ibg1kbzVTntFIrI=" />
				</div>
			  	<input id="file" name="file" type="file" />
			  	<input class="signin-btn" id="import" name="commit" type="submit" value="Import" />
			</form>
			-->
			
			
			
			<!-- <div id="file_dir" style="visibility: hidden;"></div> -->
			
			<table width="1000px">	
				<tr>
					<td style="width: 300px">
						<form>
						    <input type="file">
						</form>
						<script>
							$(":file").change(function(){
								$( "#file_name" ).val( $(":file").val() );
							});
						</script>		
					</td>
					<td style="width: 300px">
						<%= form_tag import_stores_path, :method => 'post', :id => "import_stores" do %>
								<%= hidden_field_tag :file_name, params[:file_name] %>	
						    	<%= submit_tag "download", :onclick => 'load_import(); return false;' %>
						<% end %>			
					</td>
				</tr>
			</table>
			<div style="height: 20px;"></div>
			<table>
				<tr>
					<td style="width: 60px">
						<p>Excel (xlsx)</p>				
					</td>
					<td>
						<%= form_tag import_stores_path, multipart: true do %>							
						  	<%= file_field_tag :file %>
						  	<%= submit_tag "Import" %>
						<% end %>
					</td>
				</tr>
			</table>
			<div style="height: 20px;"></div>			
			<table width="1000px" style="float: right;">
				<tr>
					<td width="200px"></td>										
					<td width="100px" style="text-align: right;">
						<p>
						  Download: 
						      <!-- link_to('CSV', { :action => 'export', :id => '100', :remote => true, :format => 'csv', :export => {:id => ['100', '99', '98', '97']} }, :id => 'export_csv')  -->
						     <%= link_to('CSV', { :action => 'export', :id => '100', :format => 'csv' }, :id => 'export_csv') %>
						     <!-- link_to('CSV', { :action => 'export', :id => '100', :remote => true, :format => 'csv' }, :id => 'export_csv')  -->
						   <!-- link_to "Excel", stores_path(format: "xls") |
						   link_to "Excelx", stores_path(format: "xlsx") 			   -->
						</p>	
					</td>
					<td width="1px"></td>					
					<td style="width: 100px; text-align: right;">
				    	<div>
					    	<h5>
							   	<% delete_all_msg = "Delete all records?" %>
								<%= button_to "Delete All Records", {:action => 'dbdelete'}, :method => :post, :confirm => delete_all_msg, :class => 'reset-db-btn' %>
							</h5>
						</div>
					</td>
					<td style="width: 100px; text-align: right;">
				    	<div>
					    	<h5>
							   	<% reset_db_msg = "Reset database index?" %>
								<%= button_to "Database Reset Index", {:action => 'dbclear'}, :method => :post, :confirm => reset_db_msg, :class => 'reset-db-btn' %>
							</h5>
						</div>
					</td>
				</tr>		
			</table>	
			<div style="clear: both;">
			
			
			<div class="table-signin">
				
				<div class="row">
					
					<div class="cell-100percent" tabindex="1">


						<%= form_tag stores_path, :method => 'get', :id => "stores_search" do %>
						  	
						  	<span>

						    	 <!-- text_field_tag :search, params[:search]  -->
						    	
						    	<%= text_field_tag :search %>
						    	
						   	</span>
						   	<span class="bar">Search by: </span>
					
						   	<span>
							
					   		<%= select_tag("search_by", options_for_select(
					   				[['ID', '1'],
					   				['Type','2'],
					   				['Salutation','3'],					   				 
					   				['First Name','4'],
					   				['Last Name','5'],
					   				['Title','6'],
					   				['Institute','7'],
					   				['Department','8'],
					   				['Address 1','9'],
					   				['Address 2','10'],
					   				['City','11'],
					   				['State','12'],
					   				['Zip/Postal Code','13'],
					   				['Country','14'],
					   				['Phone','15'],
					   				['Fax','16'],
					   				['Direct Phone','17'],
					   				['Mobile Phone','18'],
					   				['Email','19'],					   				
					   				['Website','20']])) %>
							
						    </span>

							<span>
						    	<%= submit_tag "Search", :id => nil %>
						  	</span>
						  						
							<div id="stores">
								
								<%= render 'stores/upload_files'%>

							</div>
						  
						<% end %>
												
					</div>
					
				</div>
				
			</div>
			
		</div>	
		
	</div>					

	<script>

		$(document).on('click','#stores th a, #stores .pagination a',function(){
		    $.getScript(this.href);
		    return false;
		});

		$("#stores_search").submit(function() {	
			// alert('stores_search');
		    $.get($("#stores_search").attr("action"), $("#stores_search").serialize(), null, "script");
		    return false;
		});

		
		function load_import() {

			$.event.trigger({
				type: "loading_import"
			});				
			
			return false;
		}
		
		$(document).on("loading_import", loading_importHandler);
		
		function loading_importHandler(e) {
				alert('event loading_import');
				
				$('#loading').css({
					visibility: 'visible'
				})
				
			    $('#loading').fadeOut(1000);
				
				
		}


		//$("#archives_search input").keyup(function() {
		// $("#stores_search").submit(function() {	
			// alert('stores_search');
		    // $.get($("#stores_search").attr("action"), $("#stores_search").serialize(), null, "script");
		    // return false;
		// });

		// $("#export_csv").on('click', function() {	
// 			
			// alert($("#export_csv").attr("action"));
// 			
		    // $.get($("stores/export", null, null, "script");
		    // return false;
		// });
	
	</script>
					

						<!-- <div id="get-import" class="boxtemp-blue" style="width: 20px; height: 20px;"></div> -->						
						
				    	<!-- <div>
					    	<h5>
								 button_to "Import File", {:action => 'import', :file => 'clyde' }, :onclick => 'getDir(); return false;', :method => :post, :class => 'reset-db-btn' 
							</h5>
						</div> -->
						
						<!-- <form action="/stores/import?file=this+file" class="button_to" method="post">
							<div>
								<input class="reset-db-btn" onclick="getDir();" type="submit" value="Import File" />
								<input name="authenticity_token" type="hidden" value="i4S3zKfk0QnFTvXLd+ww+JHaWoi9Ibg1kbzVTntFIrI=" />
							</div>
						</form> -->

